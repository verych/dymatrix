<html>
<head>
    <meta charset="utf-8">
    <style>
        .controls {width: 600px; float: left;}
        .results {width: 600px; float: left;}
    </style>
</head>
<body>
    <script type="text/javascript" src="dymatrix.js" charset="utf-8"></script>
    <script>
        function onMatrixCreated(arrayOfMatrix) {
            arrayOfMatrix.forEach(function (currentValue, index, arr) {
                setUpdate(currentValue, 'r' + index);
                currentValue.exportData();
            });
        };
        function setUpdate(m, id) {
            m.setData(function (data) {
                console.log(data);
                var el = document.getElementById(id);
                el.innerText = JSON.stringify(data).replace(/:{/g, ":\r\n{").replace(/},/g, "},\r\n");

            });
        }

        dymatrix.init('container', {
            groups: [
                {
                    id: 'web',
                    name: 'Web',
                    rows: [
                        { id: 'download', name: 'Download file from web' },
                        { id: 'share_link', name: 'Create shared link from web' },
                        { id: 'download_link', name: 'Download file from shared link' },
                        { id: 'view_link', name: 'View file from shared link' },
                        { id: 'wopi', name: 'View/edit with Office online' }
                    ]
                },
                {
                    id: 'mobile',
                    name: 'Mobile',
                    rows: [
                        { id: 'share_link', name: 'Create shared link' },
                        { id: 'view', name: 'View' },
                        { id: 'open', name: 'Open In' }
                    ]
                },
                {
                    id: 'desktop',
                    name: 'Desktop',
                    rows: [
                        { id: 'sync', name: 'Sync down' }
                    ]
                },
                {
                    id: 'outlook',
                    name: 'Outlook',
                    rows: [
                        { id: 'share_link', name: 'Create shared link' }
                    ]
                }
            ],
            columns: [
                { id: 'guest', name: 'Guest' },
                { id: 'user', name: 'Registered' },
                { id: 'admin', name: 'Admin' }
            ],
            options: [
                { id: 'allow', name: 'Allow' },
                { id: 'warn', name: 'Warn' },
                { id: 'disallow', name: 'Disallow' }
            ],
            values: {
                web: {
                    download: {
                        guest: 'disallow',
                        user: 'warn',
                        admin: 'disallow',
                    },
                    share_link: {
                        guest: 'disallow',
                        user: 'allow',
                        admin: 'allow',
                    },
                    download_link: {
                        guest: 'disallow',
                        user: 'warn',
                        admin: 'warn',
                    },
                    view_link: {
                        guest: 'disallow',
                        user: 'disallow',
                        admin: 'disallow',
                    },
                    wopi: {
                        guest: 'disallow',
                        user: 'warn',
                        admin: 'allow',
                    },
                }
            }
        }, 
        {
            headerPopup: false,
            cellPopup: true
        },
        onMatrixCreated);
    </script>
    <div class="controls">
        <div class="container"></div>
    </div>
    <div class="results">
        <strong>Result #1:</strong>
        <pre><div id="r0">...</div></pre>
    </div>
</body>
</html>